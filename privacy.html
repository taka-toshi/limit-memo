<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>プライバシーポリシー - Memo App</title>
    <style>
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            max-width: 820px;
            margin: 28px auto;
            padding: 0 16px;
            color: #222
        }

        h1,
        h2 {
            color: #0b65c2
        }

        pre {
            white-space: pre-wrap
        }

        footer {
            margin-top: 36px;
            color: #666;
            font-size: 0.9rem
        }

        a {
            color: #0b65c2
        }
    </style>
</head>

<body>
    <div id="policy-container">読み込み中…</div>
    <script>
        async function loadPolicy() {
            try {
                const res = await fetch('./privacy.md');
                if (!res.ok) throw new Error('ロード失敗');
                const md = await res.text();
                // Try to load marked if available, otherwise render as pre
                if (window.marked) {
                    document.getElementById('policy-container').innerHTML = marked.parse(md);
                } else {
                    // dynamically load marked from CDN then render
                    const s = document.createElement('script');
                    s.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
                    s.onload = () => {
                        document.getElementById('policy-container').innerHTML = marked.parse(md);
                    };
                    s.onerror = () => {
                        const pre = document.createElement('pre');
                        pre.textContent = md;
                        const c = document.getElementById('policy-container');
                        c.textContent = '';
                        c.appendChild(pre);
                    };
                    document.head.appendChild(s);
                }
            } catch (e) {
                const c = document.getElementById('policy-container');
                c.textContent = 'ポリシーの読み込みに失敗しました。';
                console.error(e);
            }
        }
        loadPolicy();
    </script>
</body>

</html>